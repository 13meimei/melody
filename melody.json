{
  "version": 1,
  "extra_config": {
    "melody_http_server_handler": {
      "name": ["plugin_gologging"]
    },
    "melody_gologging": {
      "level": "DEBUG",
      "prefix": "[Grant]",
      "syslog": false,
      "stdout": true,
      "format": "default"
    }
  },
  "timeout": "3000ms",
  "cache_ttl": "300s",
  "output_encoding": "json",
  "port": 8000,
  "endpoints": [
    {
      "endpoint": "/user/info/{id}/{name}",
      "method": "GET",
      "extra_config": {},
      "output_encoding": "json",
      "concurrent_calls": 10,
      "backends": [
        {
          "url_pattern": "/roles",
          "encoding": "json",
          "extra_config": {},
          "method": "GET",
          "host": [
            "127.0.0.1:8001"
          ],
          "disable_host_sanitize": false,
          "group": "roles_info"
        },
        {
          "url_pattern": "/person/{id}/{name}",
          "encoding": "json",
          "extra_config": {},
          "method": "GET",
          "host": [
            "127.0.0.1:8001"
          ],
          "disable_host_sanitize": false,
          "group": "person_info"
        }
      ]
    },
    {
      "endpoint": "/roles",
      "method": "GET",
      "extra_config": {},
      "output_encoding": "json",
      "concurrent_calls": 1,
      "backends": [
        {
          "url_pattern": "/roles",
          "encoding": "json",
          "extra_config": {},
          "method": "GET",
          "host": [
            "127.0.0.1:8001"
          ],
          "disable_host_sanitize": false,
          "group": "roles_info"
        }
      ]
    },
    {
      "endpoint": "/get-person",
      "method": "GET",
      "extra_config": {
        "melody_botmonitor": {
          "blacklist": ["Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:73.0) Gecko/20100101 Firefox/73.0", "b"],
          "patterns": [
              "(Mozilla/5.0).*",
              "(d)/.*"
          ],
          "cacheSize": 0
      }
      },
      "output_encoding": "json",
      "backends": [
        {
          "url_pattern": "/person",
          "encoding": "json",
          "extra_config": {

          },
          "method": "GET",
          "host": [
            "127.0.0.1:8080"
          ]
        },
        {
          "url_pattern": "/person/2",
          "encoding": "json",
          "extra_config": {
            "melody_proxy": {
              "shadow": true
            }
          },
          "method": "GET",
          "group": "aaa",
          "host": [
            "127.0.0.1:8080"
          ]
        },
        {
          "url_pattern": "/person/3",
          "encoding": "json",
          "extra_config": {
            "melody_proxy": {
              "shadow": true
            }
          },
          "method": "GET",
          "group": "bbb",
          "host": [
            "127.0.0.1:8080"
          ]
        }
      ]
    },
    {
      "endpoint": "/findone/{name}",
      "method": "GET",
      "extra_config": {
        "melody_proxy": {
          "sequential": true
        }
      },
      "output_encoding": "json",
      "concurrent_calls": 1,
      "backends": [
        {
          "url_pattern": "/user/{name}",
          "group": "base_info",
          "encoding": "json",
          "sd": "static",
          "extra_config": {},
          "method": "GET",
          "host": [
            "127.0.0.1:8001"
          ]
        },
        {
          "url_pattern": "/role/{resp0_base_info.role_id}",
          "encoding": "json",
          "sd": "static",
          "extra_config": {},
          "method": "GET",
          "group": "role_info",
          "host": [
            "127.0.0.1:8001"
          ]
        }
      ]
    },
    {
      "endpoint": "/static",
      "method": "GET",
      "extra_config": {
        "melody_proxy": {
          "sequential": true,
          "static": {
            "strategy": ["success"],
            "data": {
              "static": [
                {
                  "static1": 1
                },
                {
                  "static2": true
                },
                {
                  "static3": "hello"
                }
              ]
            }
          }

        }
      },
      "output_encoding": "json",
      "concurrent_calls": 1,
      "backends": [
        {
          "url_pattern": "roles",
          "encoding": "json",
          "sd": "static",
          "extra_config": {
            "melody_proxy": {
              "flatmap_filter": [
                {
                  "type": "move",
                  "args": [
                    "data.0.ID",
                    "data.0.role_id"
                  ]
                },
                {
                  "type": "move",
                  "args": [
                    "data.0.CreatedAt",
                    "data.0.create_at"
                  ]
                },
                {
                  "type": "del",
                  "args": [
                    "data.1.roleName"
                  ]
                }
              ]
            }
          },
          "group": "roles",
          "method": "GET",
          "host": [
            "127.0.0.1:8001"
          ]
        },
        {
          "url_pattern": "/role/static",
          "encoding": "json",
          "sd": "static",
          "extra_config": {},
          "method": "GET",
          "group": "static_data",
          "host": [
            "127.0.0.1:7777"
          ]
        }
      ]
    }
  ]
}